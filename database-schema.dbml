

Table pacientes {
  id int [pk, increment]
  cpf varchar(14) [unique, not null]
  nome varchar(255) [not null]
  email varchar(255) [unique, not null]
  telefone varchar(20)
  data_nascimento date
  senha_hash varchar(255) [not null]
  numero_carteirinha varchar(50) [unique]
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Table especialidades {
  id int [pk, increment]
  nome varchar(100) [unique, not null]
  tipo varchar(50) [not null]
  descricao text
  requer_preparo boolean [default: false]
  instrucoes_preparo text
  duracao_media int
  ativo boolean [default: true]
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Table profissionais {
  id int [pk, increment]
  nome varchar(255) [not null]
  tipo varchar(50) [not null]
  crm varchar(20)
  especialidade_id int [not null]
  telefone varchar(20)
  email varchar(255)
  unidade varchar(255) [not null]
  sala varchar(50)
  ativo boolean [default: true]
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Table agendamentos {
  id int [pk, increment]
  paciente_id int [not null]
  profissional_id int [not null]
  especialidade_id int [not null]
  tipo varchar(50) [not null]
  data_agendamento date [not null]
  horario time [not null]
  unidade varchar(255) [not null]
  sala varchar(50)
  status varchar(50) [not null, default: 'confirmado']
  observacoes text
  observacoes_profissional text
  motivo_cancelamento text
  data_confirmacao timestamp
  data_cancelamento timestamp
  data_conclusao timestamp
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Ref: agendamentos.paciente_id > pacientes.id [delete: cascade]
Ref: agendamentos.profissional_id > profissionais.id [delete: restrict]
Ref: agendamentos.especialidade_id > especialidades.id [delete: restrict]
Ref: profissionais.especialidade_id > especialidades.id [delete: restrict]
